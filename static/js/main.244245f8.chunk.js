(this["webpackJsonppublic-api-project"]=this["webpackJsonppublic-api-project"]||[]).push([[0],{34:function(e,t,c){},35:function(e,t,c){},43:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(20),s=c.n(r),o=(c(34),c(35),c(15)),A=c(3),i=c(45),j=c(52),l=c(1),u=function(){return Object(l.jsxs)(i.a,{fluid:!0,className:"p-2 py-3 bg-dark m-0 d-flex justify-content-between position-sticky top-0",children:[Object(l.jsx)(d,{title:"The One API",url:"/"}),Object(l.jsxs)(j.a,{className:"justify-content-end",children:[Object(l.jsx)(d,{title:"Characters",url:"/characters"}),Object(l.jsx)(d,{title:"Movies",url:"/movies"}),Object(l.jsx)(d,{title:"Books",url:"/books"})]})]})},d=function(e){var t=e.title,c=e.url;return Object(l.jsx)(j.a.Item,{children:Object(l.jsx)(o.b,{to:c,className:"text-light header-link nav-link",children:t})})},b=function(e){var t=e.children;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u,{}),Object(l.jsx)(i.a,{className:"shadow-lg bg-light minh-100",children:t})]})},h=function(){return Object(l.jsx)(b,{children:Object(l.jsx)("p",{children:"This is the homepage"})})},x=c(2),m=c(4),f=c(9),O=c.n(f),p=c(13),v=function(e,t,c,a){var r=Object(n.useCallback)((function(){var n=JSON.parse(localStorage.getItem(e))||t;return c?c(n):n}),[c,e,t]),s=Object(n.useState)(r),o=Object(m.a)(s,2),A=o[0],i=o[1],j=Object(n.useCallback)((function(t){var c=a?a(t):t;localStorage.setItem(e,JSON.stringify(c)),i(t)}),[i,a,e]);return Object(n.useEffect)((function(){var t=function(t){return t.key===e&&i(r())};return window.addEventListener("storage",t),function(){return window.removeEventListener("storage",t)}}),[e,r,i]),[A,j]},g=function(e,t,c){var a=v(t,{}),r=Object(m.a)(a,2),s=r[0],o=r[1],A=Object(n.useState)(!1),i=Object(m.a)(A,2),j=i[0],l=i[1];return Object(n.useEffect)((function(){console.log("start use Effect");var t=function(){var t=Object(p.a)(O.a.mark((function t(){var n,a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===s||void 0===s?void 0:s.docs)){t.next=3;break}return l(!0),t.abrupt("return");case 3:return l(!1),n={method:"GET",headers:{"Content-Type":"application/json",authorization:" Bearer 26hqMsTSLxvOpsUW8ORK"}},console.log("fetching response"),t.next=8,fetch("https://the-one-api.dev/v2".concat(e).concat(c?"?limit=".concat(c):""),n);case 8:return a=t.sent,t.next=11,a.json();case 11:r=t.sent,console.log("response data: ",r),o(r),l(!0);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t().then((function(){return console.log("data has been fetched!")}))}),[e]),{data:s,loaded:j}},y=c(47),k=c(48),N=c(49),w=c(50),E="AIzaSyAMghpajjVfZaDebDhYWJc7UKfFZ6B17cQ",P=c(46),M=c(53),K=function(){return Object(l.jsx)(b,{children:Object(l.jsx)(C,{children:Object(l.jsx)(S,{})})})},B=Object(n.createContext)(),C=function(e){var t=e.children,c=g("/book","books"),a=c.data,r=c.loaded,s=Object(n.useMemo)((function(){return{books:a.docs,loaded:r}}),[a,r]);return Object(l.jsx)(B.Provider,{value:s,children:t})},S=function(){var e=Object(n.useContext)(B),t=e.books;return e.loaded&&t.map((function(e){return Object(l.jsx)(W,{book:e},e._id)}))},W=function(e){var t=e.book,c=function(e){var t=Object(n.useRef)(e.replaceAll(" ","+")),c=v("".concat(t.current,"-cover"),""),a=Object(m.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)(!1),A=Object(m.a)(o,2),i=A[0],j=A[1];return Object(n.useEffect)((function(){var c=function(){var e=Object(p.a)(O.a.mark((function e(){var c,n,a,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return j(!0),e.abrupt("return");case 3:return c="https://bookcoverapi.herokuapp.com/getBookCover",n={method:"GET",mode:"no-cors",headers:{"access-control-allow-origin":"*"}},console.log("".concat(c,"?bookTitle=").concat(t.current)),e.next=8,fetch("".concat(c,"?bookTitle=").concat(t.current),n);case 8:return a=e.sent,console.log("response: ",a),e.next=12,a.json();case 12:o=e.sent,console.log("response data: ",o),s(o.bookCoverUrl),j(!0);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c().then((function(){return console.log("fetching cover for ".concat(e," complete"))}))}),[]),{cover:r,loaded:i}}(t.name),a=c.cover,r=function(e){var t=Object(n.useRef)(e.replaceAll(" ","+")),c=v("".concat(t.current,"-data"),{}),a=Object(m.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)(!1),A=Object(m.a)(o,2),i=A[0],j=A[1];return Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(O.a.mark((function e(){var c,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===r||void 0===r?void 0:r.title)){e.next=3;break}return j(!0),e.abrupt("return");case 3:return j(!1),c="q=".concat(t.current,"&orderBy=relevance&key=")+E,e.next=8,fetch("https://www.googleapis.com/books/v1/volumes?"+c);case 8:return n=e.sent,e.next=11,n.json();case 11:a=e.sent,s(a.items[0].volumeInfo),j(!0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(){return console.log("fetched data book from google api")}))}),[]),{bookData:r,loaded:i}}(t.name),s=r.bookData,o=g("/book/".concat(t._id,"/chapter"),"".concat(t.name,"-chapters")).data,A=v("".concat(t.name,"-show-chapters"),!1),i=Object(m.a)(A,2),j=i[0],u=i[1];return Object(l.jsx)(P.a,{children:Object(l.jsx)(M.a,{addEndListener:function(e,t){return e.addEventListener("transitionend",t,!1)},classNames:"fade",children:j?Object(l.jsx)(H,{chapters:o.docs,setShowChapters:u}):Object(l.jsx)(Q,{book:Object(x.a)(Object(x.a)({},t),{},{cover:a}),bookData:s,setShowChapters:u})},j?"cover":"chapters")})},T=function(e){var t=e.children;return Object(l.jsx)(i.a,{className:"mx-3 my-5 shadow-sm rounded-2 w-auto border d-flex justify-content-start p-3 bg-light",children:Object(l.jsx)(y.a,{className:"w-100",children:t})})},Q=function(e){var t,c=e.book,n=e.bookData,a=e.setShowChapters;return Object(l.jsxs)(T,{children:[Object(l.jsx)(k.a,{xs:10,md:3,className:"py-3 mx-auto",children:Object(l.jsx)(N.a,{fluid:!0,src:c.cover})}),Object(l.jsxs)(k.a,{xs:12,md:9,className:"d-flex justify-content-start gap-3 flex-column pb-3",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{className:"display-6 fs-4 m-0",children:c.name}),Object(l.jsx)("p",{className:"text-muted lead fs-6 m-0",children:null===n||void 0===n||null===(t=n.authors)||void 0===t?void 0:t[0]})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:n.description}),Object(l.jsx)(w.a,{variant:"link",className:"me-0 ms-auto",onClick:function(){return a(!0)},children:"See Chapters"})]})]})]})},H=function(e){var t=e.chapters,c=e.setShowChapters;return Object(l.jsx)(T,{children:Object(l.jsxs)(k.a,{xs:10,className:"d-flex justify-content-between",children:[Object(l.jsx)("div",{children:Object(l.jsx)(w.a,{variant:"link",onClick:function(){return c(!1)},children:"Back To Overview"})}),Object(l.jsxs)(k.a,{xs:8,children:[Object(l.jsx)("h3",{className:"display-6 fs-4 mb-3",children:"Chapters:"}),t.map((function(e){return Object(l.jsx)("p",{className:"fs-6 lead fw-normal my-0 ms-3",children:e.chapterName},e.id)}))]})]})})},I=function(){return Object(l.jsx)(b,{children:Object(l.jsx)("p",{children:"This is the character page"})})},q=function(e){var t=e.imageURL,c=Object(n.useRef)("https://image.tmdb.org/t/p/original/"+t);return t?Object(l.jsx)(N.a,{fluid:!0,src:t?c.current:"data:image/jpeg;base64,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",className:"rounded-2"}):Object(l.jsx)(l.Fragment,{})},D=function(){return Object(l.jsx)(b,{children:Object(l.jsx)(F,{children:Object(l.jsx)(L,{})})})},R=Object(n.createContext)(),F=function(e){var t=e.children,c=g("/movie","movies"),a=c.data,r=c.loaded,s=Object(n.useMemo)((function(){return{movies:a,loaded:r}}),[a]);return Object(l.jsx)(R.Provider,{value:s,children:t})},L=function(){var e,t=Object(n.useContext)(R),c=t.movies;t.loaded;return Object(l.jsx)(l.Fragment,{children:(null===c||void 0===c||null===(e=c.docs)||void 0===e?void 0:e[0])&&c.docs.map((function(e){return Object(l.jsx)(Z,{TheOneMovie:e})}))})},Z=function(e){var t=e.TheOneMovie,c=function(e){var t=Object(n.useState)({}),c=Object(m.a)(t,2),a=c[0],r=c[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(p.a)(O.a.mark((function t(){var c,n,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat("https://api.themoviedb.org/3/search/movie?","api_key=").concat("a5390f65ae702992df08717b9b685d9e","&query=").concat(e.replaceAll(" ","%20")),t.next=4,fetch(c);case 4:return n=t.sent,t.next=7,n.json();case 7:a=t.sent,r(a.results[0]);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t().then((function(){return console.log("movie fetched by title from TMDB")}))}),[]),{movie:a}}(t.name),a=c.movie;return Object(l.jsx)(l.Fragment,{children:(null===a||void 0===a?void 0:a.poster_path)&&Object(l.jsx)(U,{movie:a,theOneMovieId:t._id})})},U=function(e){var t=e.movie,c=e.theOneMovieId;return Object(l.jsxs)(T,{children:[Object(l.jsx)(k.a,{xs:10,md:3,className:"py-3 mx-auto",children:Object(l.jsx)(q,{imageURL:t.poster_path})}),Object(l.jsxs)(k.a,{xs:12,md:9,className:"d-flex justify-content-start gap-3 flex-column pb-3",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{className:"display-6 fs-4 m-0",children:t.original_title}),Object(l.jsx)("p",{className:"text-muted lead fs-6 m-0",children:t.release_date})]}),Object(l.jsx)("div",{children:Object(l.jsx)("p",{children:t.overview})}),Object(l.jsxs)("div",{className:"container mt-auto mb-0 d-flex justify-content-end gap-3",children:[Object(l.jsx)(o.b,{to:"/movies/".concat(t.id,"/details"),className:"btn btn-secondary",children:"details"}),Object(l.jsx)(o.b,{to:"/movies/".concat(c,"/quotes"),className:"btn btn-secondary",children:"Quotes"})]})]})]})},J=c(51),Y=function(){var e,t=Object(A.g)().movieId,c=function(e){var t=Object(n.useState)([{}]),c=Object(m.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(!1),o=Object(m.a)(s,2),A=o[0],i=o[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(p.a)(O.a.mark((function t(){var c,n,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat("https://api.themoviedb.org/3/movie/"+e+"/credits?","api_key=").concat("a5390f65ae702992df08717b9b685d9e","&language=en-US"),t.next=4,fetch(c);case 4:return n=t.sent,t.next=7,n.json();case 7:a=t.sent,r(a.cast),i(!0);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t().then((function(){return console.log("finished fetching cast")}))}),[]),{cast:a,loaded:A}}(t),a=c.cast,r=c.loaded,s=function(e){var t=Object(n.useState)({}),c=Object(m.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(!1),o=Object(m.a)(s,2),A=o[0],i=o[1];return Object(n.useEffect)((function(){var t=function(){var t=Object(p.a)(O.a.mark((function t(){var c,n,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="".concat("https://api.themoviedb.org/3/movie/"+e+"?","api_key=").concat("a5390f65ae702992df08717b9b685d9e","&language=en-US"),t.next=4,fetch(c);case 4:return n=t.sent,t.next=7,n.json();case 7:a=t.sent,r(a),i(!0);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t().then((function(){return console.log("finished fetching cast")}))}),[]),{movie:a,loaded:A}}(t),o=s.movie,i=s.loaded;return Object(l.jsxs)(b,{children:[i?Object(l.jsx)(X,{movie:o}):Object(l.jsx)(G,{}),!r&&Object(l.jsx)(G,{}),r&&(null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e.character)&&Object(l.jsx)(V,{cast:a})]})},G=function(){return Object(l.jsx)(i.a,{className:"m-5 d-flex justify-content-center align-items-center h-100",children:Object(l.jsx)(J.a,{animation:"border",variant:"primary"})})},X=function(e){var t=e.movie;return Object(l.jsxs)(i.a,{className:"py-5 px-3 border rounded-2 mt-3",children:[Object(l.jsxs)(y.a,{children:[Object(l.jsxs)(k.a,{xs:12,md:8,children:[Object(l.jsx)("h3",{className:"display-6",children:t.original_title}),Object(l.jsxs)("blockquote",{className:"blockquote my-3",children:[Object(l.jsx)("p",{className:"mb-3",children:t.tagline}),Object(l.jsx)("footer",{className:"blockquote-footer",children:Object(l.jsx)("cite",{title:"Movie Name",children:t.title})})]}),Object(l.jsx)("p",{className:"lead mt-4",style:{maxWidth:"600px"},children:t.overview}),t.homepage&&Object(l.jsx)("a",{href:t.homepage,target:"_blank",children:"Go to website"})]}),Object(l.jsx)(k.a,{xs:{span:10,order:"first"},md:{span:4,order:"last"},className:"mx-auto my-3",children:Object(l.jsx)(q,{imageURL:t.poster_path})})]}),Object(l.jsxs)(y.a,{className:"mt-5 align-items-end justify-content-center gap-3",children:[Object(l.jsx)("h3",{className:"display-6 fs-4 fw-normal",children:"Production companies:"}),t.production_companies.map((function(e){return Object(l.jsx)(z,{productionCompany:e},e.id)}))]})]})},z=function(e){var t=e.productionCompany;return Object(l.jsx)(k.a,{xs:5,md:2,children:Object(l.jsx)(q,{imageURL:t.logo_path})})},V=function(e){var t=e.cast;return Object(l.jsxs)("div",{className:"d-flex justify-content-evenly gap-3 flex-wrap w-100 mt-3",children:[Object(l.jsx)(i.a,{children:Object(l.jsx)("h3",{className:"display-6 fs-2",children:"Cast:"})}),t.map((function(e){return Object(l.jsx)(_,{castMember:e})}))]})},_=function(e){var t=e.castMember;return Object(l.jsx)(k.a,{xs:10,md:5,className:" border rounded-2 mx-auto",children:Object(l.jsxs)(y.a,{className:"m-0 p-0",children:[Object(l.jsx)(k.a,{xs:10,md:6,className:"p-3 mx-auto",children:Object(l.jsx)(q,{imageURL:t.profile_path})}),Object(l.jsxs)(k.a,{xs:12,md:6,className:"d-flex justify-content-start gap-3 flex-column p-3 mt-3",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{className:"display-6 fs-4 m-0",children:t.character}),Object(l.jsx)("p",{className:"text-muted lead fs-6 m-0",children:t.original_name})]}),Object(l.jsx)("div",{children:Object(l.jsx)("p",{})})]})]})})},$=function(){var e=Object(A.g)().movieId,t=g("/movie/".concat(e,"/quote"),"quotes-".concat(e),25),c=t.data,n=t.loaded;return Object(l.jsx)(b,{children:n?Object(l.jsx)(ee,{quotes:c.docs}):Object(l.jsx)(G,{})})},ee=function(e){var t=e.quotes;return(null===t||void 0===t?void 0:t[0])?t.map((function(e){return Object(l.jsx)(te,{quote:e})})):Object(l.jsx)(i.a,{className:"p-5",children:Object(l.jsx)("h3",{className:"display-6 text-center",children:"No Quotes found in database :("})})},te=function(e){var t=e.quote,c=g("/character/".concat(t.character),"character-".concat(t.character)),n=c.data;return c.loaded?Object(l.jsx)(ce,{character:n.docs[0],quote:t}):null},ce=function(e){var t=e.quote,c=e.character;return Object(l.jsxs)("blockquote",{className:"blockquote my-3",children:[Object(l.jsx)("p",{className:"mb-3",children:t.dialog}),Object(l.jsx)("footer",{className:"blockquote-footer",children:Object(l.jsx)("cite",{title:"Movie Name",children:c.name})})]})};var ne=function(){return Object(l.jsx)(o.a,{children:Object(l.jsxs)(A.c,{children:[Object(l.jsx)(A.a,{index:!0,element:Object(l.jsx)(h,{})}),Object(l.jsx)(A.a,{path:"books",element:Object(l.jsx)(K,{})}),Object(l.jsx)(A.a,{path:"characters",element:Object(l.jsx)(I,{})}),Object(l.jsx)(A.a,{path:"movies",element:Object(l.jsx)(D,{})}),Object(l.jsx)(A.a,{path:"movies/:movieId/details",element:Object(l.jsx)(Y,{})}),Object(l.jsx)(A.a,{path:"movies/:movieId/quotes",element:Object(l.jsx)($,{})})]})})},ae=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,54)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(ne,{})}),document.getElementById("root")),ae()}},[[43,1,2]]]);
//# sourceMappingURL=main.244245f8.chunk.js.map